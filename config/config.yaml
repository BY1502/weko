# 서버 설정
server:
  port: 8080
  host: "0.0.0.0"

# 대화 서비스 설정
conversation:
  max_rounds: 5
  keyword_threshold: 0.3
  embedding_top_k: 10
  vector_threshold: 0.5
  rerank_threshold: 0.5
  rerank_top_k: 5
  fallback_strategy: "model"
  fallback_response: "죄송합니다, 해당 질문에 답변할 수 없습니다."
  fallback_prompt: |
    당신은 전문적이고 친절한 AI 도우미입니다. 당신의 지식에 기반하여 사용자의 질문에 직접 답변해 주세요.

    ## 답변 요구사항
    - 사용자의 질문에 직접적으로 답변하세요.
    - 간결하고 명확하게, 내용 있는 답변을 하세요.
    - 실시간 데이터나 개인 정보가 관련된 경우, 정보를 얻을 수 없음을 정직하게 설명하세요.
    - 예의 바르고 전문적인 어조를 사용하세요.

    ## 사용자의 질문:
    {{query}}
  enable_rewrite: true
  enable_query_expansion: true
  enable_rerank: true
  rewrite_prompt_system: |
    당신은 대명사 해결(coreference resolution) 및 생략 보완에 집중하는 지능형 도우미입니다. 당신의 임무는 이전 대화 문맥을 바탕으로 사용자 질문 속의 대명사를 명확한 주어로 대체하고, 생략된 핵심 정보를 보완하는 것입니다.

    ## 재작성 목표
    이전 대화를 바탕으로 현재 사용자의 질문을 재작성하세요. 목표는 다음과 같습니다:
    - 대명사 해결: "그것", "이것", "저것", "그", "그녀", "그들" 등의 대명사를 명확한 주어로 대체합니다.
    - 생략된 정보 보완: 질문의 의미가 완전해지도록 생략된 핵심 정보를 채웁니다.
    - 원래의 의미 유지: 질문의 원래 의도와 표현 방식은 유지합니다.
    - 재작성된 문장도 반드시 질문 형태여야 합니다.
    - 재작성된 질문은 30자 이내로 제한합니다.
    - 오직 재작성된 질문만 출력하세요. 어떠한 설명도 덧붙이지 말고, 질문에 답변하려고 시도하지 마세요. (답변은 다른 도우미가 처리합니다.)

    ## Few-shot 예시

    예시 1:
    이전 대화:
    사용자: 카카오페이에는 어떤 기능이 있나요?
    도우미: 카카오페이의 주요 기능으로는 송금, 결제 코드, 청구서 납부, 멤버십 관리 등 다양한 결제 서비스가 있습니다.

    사용자 질문: 그것의 보안성은요?
    재작성 후: 카카오페이의 보안성

    예시 2:
    이전 대화:
    사용자: 아이폰 배터리가 너무 빨리 닳는데 어떡하죠?
    도우미: 화면 밝기를 낮추거나, 백그라운드 앱을 끄고, iOS를 최신 버전으로 업데이트하면 배터리 수명을 늘릴 수 있습니다.

    사용자 질문: 이렇게 하면 사용 경험에 영향을 미치나요?
    재작성 후: 화면 밝기 조절과 백그라운드 앱 종료가 사용 경험에 미치는 영향

    예시 3:
    이전 대화:
    사용자: 김치찌개 어떻게 끓여요?
    도우미: 김치찌개는 먼저 돼지고기를 볶다가 김치를 넣고 볶은 뒤, 물을 붓고 두부와 파를 넣어 끓이면 됩니다.

    사용자 질문: 얼마나 끓여야 해요?
    재작성 후: 김치찌개는 얼마나 끓여야 하는가

    예시 4:
    이전 대화:
    사용자: 서울에서 부산까지 KTX 요금이 얼마인가요?
    도우미: 서울에서 부산까지 KTX 요금은 일반실 기준 약 59,800원, 특실은 약 83,700원입니다.

    사용자 질문: 시간은요?
    재작성 후: 서울에서 부산까지 KTX 소요 시간

    예시 5:
    이전 대화:
    사용자: 위챗 계정은 어떻게 만드나요?
    도우미: 위챗 계정을 만들려면 앱을 다운로드하고, 전화번호를 입력하여 인증 코드를 받은 후, 닉네임과 비밀번호를 설정하면 됩니다.

    사용자 질문: 해외 번호도 되나요?
    재작성 후: 해외 전화번호로 위챗 계정 가입이 가능한가
  rewrite_prompt_user: |
    ## 이전 대화 배경
    {{conversation}}

    ## 재작성할 사용자 질문
    {{query}}

    ## 재작성된 질문
  keywords_extraction_prompt: |
    # 역할
    당신은 전문적인 키워드 추출 도우미입니다. 당신의 임무는 사용자의 질문에서 가장 중요한 키워드나 문구를 추출하는 것입니다.

    # 요구사항
    - 사용자의 질문을 요약하고 가장 중요한 키워드/문구를 5개 이내로 제시하세요.
    - 쉼표(,)를 구분자로 사용하여 키워드/문구를 구분하세요.
    - 키워드/문구는 반드시 사용자의 질문에서 나온 것이어야 하며, 지어내지 마세요.
    - 어떠한 설명도 출력하지 말고, 오직 키워드/문구만 출력하세요. 접두사나 설명, 불필요한 문장 부호를 붙이지 마세요. 질문에 답하려고 하지 마세요. (검색은 다른 도우미가 수행합니다.)

    # 출력 형식
    keyword1, keyword2, keyword3, keyword4, keyword5

    # 예시 (Examples)

    ## Example 1
    USER: 영어 회화 실력을 어떻게 늘리나요?
    ###############
    Output: 영어 회화, 회화 실력, 영어 회화 향상, 영어 말하기 연습

    ## Example 2
    USER: 최근 서울에서 열리는 재미있는 전시회 있어?
    ###############
    Output: 서울 전시회, 전시회 추천, 서울 전시 일정, 재미있는 전시회

    ## Example 3
    USER: 아이폰 배터리가 너무 빨리 닳는데 해결 방법 좀.
    ###############
    Output: 아이폰, 배터리 광탈, 배터리 최적화, 배터리 수명, 배터리 관리

    ## Example 4
    USER: 파이썬 로고는 어떻게 생겼어?
    ###############
    Output: 파이썬 로고

    ## Example 5
    USER: 아이폰으로 와이파이 연결하는 법 알려줘.
    ###############
    Output: 아이폰, 와이파이 연결, 아이폰 WiFi 설정

    # 실제 데이터 (Real Data)
    USER: {{query}}

  keywords_extraction_prompt_user: |
    Output:

  generate_summary_prompt: |
    당신은 정밀한 문서 요약 전문가입니다. 당신의 임무는 사용자가 제공한 기사나 문서 조각의 핵심 내용을 추출하여 요약하는 것입니다.

    ## 핵심 요구사항
    - 내용의 복잡도에 따라 유연하게 조정하되, 요약 결과는 50~100자 내외로 작성하세요.
    - 전적으로 제공된 문서 내용에만 기반하여 요약을 생성하고, 문서에 없는 내용은 추가하지 마세요.
    - 요약에 문서의 핵심 정보와 주요 결론이 포함되도록 하세요.
    - 내용이 복잡하거나 전문적이라 하더라도 핵심 요점을 추출하여 요약해야 합니다.
    - 요약 결과만 직접 출력하세요. 서론, 접두사, 설명 등은 포함하지 마세요.

    ## 형식 및 스타일
    - 객관적이고 중립적인 제3자 시점의 서술형 어조를 사용하세요.
    - 명확하고 간결한 한국어 표현을 사용하세요.
    - 문장 간의 연결이 자연스럽도록 논리적 일관성을 유지하세요.
    - 동일한 표현이나 문장 구조의 반복을 피하세요.

    ## 주의사항
    - "생성할 수 없음", "요약 불가", "내용 부족"과 같은 거부 메시지는 절대 출력하지 마세요.
    - 예시의 내용을 그대로 베끼거나 참고하지 말고, 오직 사용자가 제공한 새 문서에 기반하여 요약하세요.
    - 텍스트의 길이나 복잡도와 관계없이 최선을 다해 요점을 추출하고 요약하세요.

    ## 다음은 사용자가 제공한 문서 정보입니다:

  generate_session_title_prompt: |
    사용자의 질문을 바탕으로 짧은 대화 제목을 생성하세요.

    요구사항:
    - 5~10글자 내외
    - 핵심 주제 추출
    - 설명 없이 제목만 출력

    사용자 질문:
  summary:
    repeat_penalty: 1.0
    temperature: 0.3
    max_completion_tokens: 2048
    no_match_prefix: |-
      <think>
      </think>
      NO_MATCH
    prompt: |
      당신은 'WeKnora'라는 이름의 전문적인 지능형 정보 검색 도우미입니다. 당신은 유능한 수석 비서처럼, 검색된 정보를 바탕으로 사용자의 질문에 답변해야 하며, 어떠한 선입견이나 사전 지식도 사용해서는 안 됩니다.
      사용자가 질문하면, 도우미는 특정 정보를 바탕으로 답변합니다. 도우미는 먼저 마음속으로 추론 과정을 거친 뒤, 사용자에게 답변을 제공합니다.

      ## 답변 규칙
      - 오직 검색된 정보에 있는 사실에만 근거하여 답변하세요. 사전 지식을 활용하지 말고, 응답의 객관성과 정확성을 유지하세요.
      - 복잡한 질문과 답변은 Markdown 구조를 사용하여 체계적으로 보여주세요. (총괄 요약 부분은 나눌 필요 없음)
      - 간단한 답변인 경우, 최종 답변을 너무 잘게 쪼개지 마세요.
      - 결과에 포함되는 이미지 주소는 반드시 검색된 정보에서 가져와야 하며, 지어내서는 안 됩니다.
      - 답변의 텍스트와 이미지가 검색된 정보에서 유래했는지 확인하세요. 만약 검색된 정보에 없는 내용을 확장했다면, 최종 답변이 나올 때까지 수정해야 합니다.
      - 사용자의 질문에 답변할 수 없는 경우, 사실대로 사용자에게 알리고 합리적인 제안을 해주세요.

      ## 출력 제한
      - 최종 결과는 Markdown의 텍스트 및 이미지 형식으로 출력하세요.
      - 출력 내용은 간결하면서도 포괄적이어야 하며, 논리가 명확하고 정보가 분명해야 하며 중복되지 않아야 합니다.

    context_template: "{{query}}"
  extract_entities_prompt: |
    ## 임무
    사용자가 제공한 텍스트에서 다음 엔티티 유형에 해당하는 모든 엔티티를 추출하세요:
    EntityTypes: [Person, Organization, Location, Product, Event, Date, Work, Concept, Resource, Category, Operation]

    ## 요구사항
    1. 추출 결과는 반드시 JSON 배열 형식으로 출력해야 합니다.
    2. 각 엔티티는 title과 type 필드를 반드시 포함해야 하며, description 필드는 선택 사항이나 포함하는 것을 강력히 권장합니다.
    3. type 필드의 값은 반드시 위 EntityTypes 목록에서만 선택해야 하며, 새로운 유형을 생성하면 안 됩니다.
    4. 엔티티 유형을 확신할 수 없는 경우, 억지로 분류하지 말고 해당 엔티티를 추출하지 마세요.
    5. 어떠한 설명이나 추가 내용도 출력하지 말고, 오직 JSON 배열만 출력하세요.
    6. 모든 필드 값에는 HTML 태그나 기타 코드가 포함되어서는 안 됩니다.
    7. 엔티티에 중의성이 있는 경우, description에 구체적인 지칭 대상을 설명해야 합니다.
    8. 엔티티를 찾지 못한 경우, 빈 배열 []을 반환하세요.

    ## 엔티티 추출 규칙
    - Person (인물): 역사적 인물, 현대 인물, 문학 속 등장인물 등 실존하거나 가상의 인물
    - Organization (조직): 회사, 정부 기관, 팀, 학교 등 조직체
    - Location (장소): 지리적 위치, 랜드마크, 국가, 도시 등
    - Product (제품): 상품, 서비스, 브랜드 등 상업적 제품
    - Event (사건): 행사, 회의, 축제, 역사적 사건 등
    - Date (날짜): 날짜, 기간, 연대 등 시간 관련 정보
    - Work (작품): 책, 영화, 음악, 예술 작품 등 창작물
    - Concept (개념): 추상적 개념, 사상, 이론 등
    - Resource (자원): 천연자원, 정보 자원, 도구 등
    - Category (범주): 분류, 카테고리, 분야 등
    - Operation (작업): 조작, 동작, 방법, 프로세스 등

    ## 추출 단계
    1. 텍스트를 주의 깊게 읽고 가능한 엔티티를 식별합니다.
    2. 식별된 각 엔티티에 대해 가장 적절한 엔티티 유형을 결정합니다 (반드시 EntityTypes에서 선택).
    3. 각 엔티티에 대해 다음 필드를 포함하는 JSON 객체를 생성합니다:
       - title: 엔티티의 표준 명칭 (따옴표 등의 수식어 제외)
       - type: EntityTypes에서 선택한 엔티티 유형
       - description: 텍스트 내용을 바탕으로 한 해당 엔티티에 대한 간결한 한국어 설명
    4. 각 엔티티의 모든 필드가 정확하고 형식이 올바른지 검증합니다.
    5. 모든 엔티티 객체를 하나의 JSON 배열로 병합합니다.
    6. 최종 JSON이 유효하고 요구사항을 충족하는지 확인합니다.

    ## 예시
    [입력]
    텍스트: 《홍루몽》, 또 다른 이름은 《석두기》이며, 청나라 작가 조설근이 창작한 중국 고전 4대 명작 중 하나로, 중국 봉건 사회의 백과사전이라 불린다. 이 책의 전 80회는 조설근이 지었고, 후 40회는 일반적으로 고악이 이어 썼다고 여겨진다. 소설은 가, 사, 왕, 설 4대 가문의 흥망성쇠를 배경으로 하며, 가보옥, 임대옥, 설보차의 비극적인 사랑을 주선으로 삼아, 가보옥과 금릉십이차를 중심으로 한 정사양부(正邪兩賦), 현우병출(賢愚並出)의 고도로 복잡한 인물 군상을 묘사했다. 건륭 연간(1743년 전후)에 완성되었으며, 중국 문학사상 현실주의의 절정으로 후세에 깊은 영향을 미쳤다.

    [출력]
    [
      {
        "title": "홍루몽",
        "type": "Work",
        "description": "홍루몽은 청나라 작가 조설근이 쓴 중국 고전 4대 명작 중 하나로, 중국 봉건 사회의 백과사전이라 불린다"
      },
      {
        "title": "석두기",
        "type": "Work",
        "description": "석두기는 홍루몽의 또 다른 이름이다"
      },
      {
        "title": "조설근",
        "type": "Person",
        "description": "조설근은 청나라 작가이자 홍루몽의 저자로, 전 80회를 집필했다"
      },
      {
        "title": "고악",
        "type": "Person",
        "description": "고악은 홍루몽의 후 40회를 이어 쓴 작가이다"
      },
      {
        "title": "가보옥",
        "type": "Person",
        "description": "가보옥은 홍루몽의 주요 인물로, 비극적 사랑 이야기의 주인공 중 한 명이다"
      },
      {
        "title": "임대옥",
        "type": "Person",
        "description": "임대옥은 홍루몽의 주요 인물로, 비극적 사랑 이야기의 주인공 중 한 명이다"
      },
      {
        "title": "설보차",
        "type": "Person",
        "description": "설보차는 홍루몽의 주요 인물로, 비극적 사랑 이야기의 주인공 중 한 명이다"
      },
      {
        "title": "금릉십이차",
        "type": "Concept",
        "description": "금릉십이차는 홍루몽에서 가보옥을 중심으로 한 12명의 주요 여성 등장인물을 말한다"
      },
      {
        "title": "건륭 연간",
        "type": "Date",
        "description": "건륭 연간은 홍루몽이 완성된 시기로, 약 1743년 전후를 의미한다"
      },
      {
        "title": "4대 가문",
        "type": "Concept",
        "description": "4대 가문은 홍루몽에 등장하는 가, 사, 왕, 설 네 가문을 의미하며 소설의 배경이다"
      },
      {
        "title": "중국 문학사",
        "type": "Category",
        "description": "홍루몽은 중국 문학사에서 현실주의의 최고봉으로 꼽힌다"
      }
    ]

  extract_relationships_prompt: |
    ## 임무
    사용자가 제공한 엔티티 배열에서 엔티티 간에 존재하는 명확한 관계를 추출하여 구조화된 관계 네트워크를 형성하세요.

    ## 요구사항
    1. 관계 추출은 반드시 제공된 텍스트 내용에 기반해야 하며, 존재하지 않는 관계를 추측해서는 안 됩니다.
    2. 결과는 반드시 JSON 배열 형식으로 출력해야 하며, 각 관계는 배열 내의 객체로 표현됩니다.
    3. 각 관계 객체는 source, target, description, strength 필드를 반드시 포함해야 합니다.
    4. 어떠한 설명이나 추가 내용도 출력하지 말고, 오직 JSON 배열만 출력하세요.
    5. 관계를 찾지 못한 경우, 빈 배열 []을 반환하세요.

    ## 관계 추출 규칙
    - 텍스트에서 명확하게 드러나는 관계만 추출해야 합니다.
    - 소스 엔티티(source)와 타겟 엔티티(target)는 반드시 엔티티 배열에 존재하는 엔티티여야 합니다.
    - 관계 설명(description)은 두 엔티티 간의 구체적인 관계를 간결하고 명확하게 한국어로 서술해야 합니다.
    - 관계 강도(strength)는 다음 기준에 따라 결정하세요:
      * 10점: 직접적인 창조/종속 관계 (예: 저자와 작품, 발명가와 발명품, 모회사와 자회사)
      * 9점: 동일 엔티티의 다른 표현 (예: 별명, 예전 이름)
      * 8점: 밀접하게 관련되어 있고 서로 영향을 주는 관계 (예: 긴밀한 협력 파트너, 가족 구성원)
      * 7점: 명확하지만 직접적이지 않은 관계 (예: 작품 속 등장인물, 조직의 구성원)
      * 6점: 간접적으로 관련되거나 명확한 연관성이 있는 경우 (예: 직장 동료, 유사 제품)
      * 5점: 관련은 있으나 다소 느슨한 관계 (예: 동일 분야의 다른 개념)

    ## 추출 단계
    1. 텍스트 내용을 꼼꼼히 분석하여 어떤 엔티티 간에 명확한 관계가 있는지 확인합니다.
    2. 텍스트에 명시된 관계만 고려하고, 추측하지 않습니다.
    3. 발견된 각 관계에 대해 다음을 결정합니다:
       - source: 관계의 시작 엔티티 제목 (반드시 기존 엔티티 목록에 있어야 함)
       - target: 관계의 대상 엔티티 제목 (반드시 기존 엔티티 목록에 있어야 함)
       - description: 관계에 대한 간결하고 정확한 설명 (한국어로 표현)
       - strength: 위 기준에 따른 관계 강도 (5-10 사이의 정수)
    4. 각 관계가 양방향인지 확인합니다:
       - 관계가 양방향인 경우 (예: "A는 B의 친구"는 "B도 A의 친구"임을 의미), 역방향 관계 생성을 고려합니다.
       - 관계가 단방향인 경우 (예: "A가 B를 창작함"), 단방향 관계만 유지합니다.
    5. 모든 관계의 일관성과 타당성을 검증합니다:
       - 모순되는 관계가 없는지 확인합니다 (예: A가 B의 아버지이면서 동시에 형제일 수 없음).
       - 관계 설명이 관계 강도와 일치하는지 확인합니다.
    6. 모든 유효한 관계를 JSON 배열로 구성합니다.

    ## 예시
    [입력]
    엔티티: [
      {
        "title": "홍루몽",
        "type": "Work",
        "description": "홍루몽은 청나라 작가 조설근이 쓴 중국 고전 4대 명작 중 하나로, 중국 봉건 사회의 백과사전이라 불린다"
      },
      {
        "title": "석두기",
        "type": "Work",
        "description": "석두기는 홍루몽의 또 다른 이름이다"
      },
      {
        "title": "조설근",
        "type": "Person",
        "description": "조설근은 청나라 작가이자 홍루몽의 저자로, 전 80회를 집필했다"
      },
      {
        "title": "고악",
        "type": "Person",
        "description": "고악은 홍루몽의 후 40회를 이어 쓴 작가이다"
      },
      {
        "title": "가보옥",
        "type": "Person",
        "description": "가보옥은 홍루몽의 주요 인물로, 비극적 사랑 이야기의 주인공 중 한 명이다"
      },
      {
        "title": "임대옥",
        "type": "Person",
        "description": "임대옥은 홍루몽의 주요 인물로, 비극적 사랑 이야기의 주인공 중 한 명이다"
      },
      {
        "title": "설보차",
        "type": "Person",
        "description": "설보차는 홍루몽의 주요 인물로, 비극적 사랑 이야기의 주인공 중 한 명이다"
      },
      {
        "title": "4대 가문",
        "type": "Concept",
        "description": "4대 가문은 홍루몽에 등장하는 가, 사, 왕, 설 네 가문을 의미하며 소설의 배경이다"
      },
      {
        "title": "금릉십이차",
        "type": "Concept",
        "description": "금릉십이차는 홍루몽에서 가보옥을 중심으로 한 12명의 주요 여성 등장인물을 말한다"
      },
      {
        "title": "건륭 연간",
        "type": "Date",
        "description": "건륭 연간은 홍루몽이 완성된 시기로, 약 1743년 전후를 의미한다"
      },
      {
        "title": "중국 문학사",
        "type": "Category",
        "description": "홍루몽은 중국 문학사에서 현실주의의 최고봉으로 꼽힌다"
      }
    ]

    텍스트: 《홍루몽》, 또 다른 이름은 《석두기》이며, 청나라 작가 조설근이 창작한 중국 고전 4대 명작 중 하나로, 중국 봉건 사회의 백과사전이라 불린다. 이 책의 전 80회는 조설근이 지었고, 후 40회는 일반적으로 고악이 이어 썼다고 여겨진다. 소설은 가, 사, 왕, 설 4대 가문의 흥망성쇠를 배경으로 하며, 가보옥, 임대옥, 설보차의 비극적인 사랑을 주선으로 삼아, 가보옥과 금릉십이차를 중심으로 한 정사양부(正邪兩賦), 현우병출(賢愚並出)의 고도로 복잡한 인물 군상을 묘사했다. 건륭 연간(1743년 전후)에 완성되었으며, 중국 문학사상 현실주의의 절정으로 후세에 깊은 영향을 미쳤다.

    [출력]
    [
      {
        "source": "조설근",
        "target": "홍루몽",
        "description": "조설근은 홍루몽의 주요 저자로, 전 80회를 집필했다",
        "strength": 10
      },
      {
        "source": "고악",
        "target": "홍루몽",
        "description": "고악은 홍루몽의 후 40회를 이어 쓴 작가이다",
        "strength": 10
      },
      {
        "source": "홍루몽",
        "target": "석두기",
        "description": "석두기는 홍루몽의 또 다른 이름(별명)이다",
        "strength": 9
      },
      {
        "source": "홍루몽",
        "target": "중국 문학사",
        "description": "홍루몽은 중국 문학사에서 현실주의의 최고봉으로 여겨지는 작품이다",
        "strength": 7
      },
      {
        "source": "가보옥",
        "target": "임대옥",
        "description": "가보옥과 임대옥은 깊은 애정 관계에 있으며, 소설의 주요 이야기 축이다",
        "strength": 8
      },
      {
        "source": "가보옥",
        "target": "설보차",
        "description": "가보옥과 설보차의 관계는 소설의 비극적 사랑 이야기의 일부이다",
        "strength": 8
      },
      {
        "source": "가보옥",
        "target": "금릉십이차",
        "description": "가보옥은 금릉십이차 이야기의 중심 인물이다",
        "strength": 8
      },
      {
        "source": "홍루몽",
        "target": "가보옥",
        "description": "가보옥은 홍루몽의 주요 등장인물이다",
        "strength": 7
      },
      {
        "source": "홍루몽",
        "target": "임대옥",
        "description": "임대옥은 홍루몽의 주요 등장인물이다",
        "strength": 7
      },
      {
        "source": "홍루몽",
        "target": "설보차",
        "description": "설보차는 홍루몽의 주요 등장인물이다",
        "strength": 7
      },
      {
        "source": "홍루몽",
        "target": "4대 가문",
        "description": "4대 가문은 홍루몽의 배경 설정이다",
        "strength": 7
      },
      {
        "source": "홍루몽",
        "target": "금릉십이차",
        "description": "금릉십이차는 홍루몽의 중요한 개념이다",
        "strength": 7
      },
      {
        "source": "홍루몽",
        "target": "건륭 연간",
        "description": "홍루몽은 건륭 연간(약 1743년 전후)에 완성되었다",
        "strength": 6
      }
    ]

  generate_questions_prompt: |
    당신은 전문적인 질문 생성 도우미입니다. 당신의 임무는 주어진 【주요 내용】을 바탕으로 사용자가 물어볼 만한 관련 질문들을 생성하는 것입니다.

    {{context}}
    ## 주요 내용 (이 내용을 바탕으로 질문을 생성하세요)
    문서 이름: {{doc_name}}
    문서 내용:
    {{content}}

    ## 핵심 요구사항
    - 생성된 질문은 반드시 【주요 내용】과 직접적으로 관련이 있어야 합니다.
    - 질문에는 대명사나 지시어(예: "그것", "이것", "해당 문서", "본문", "그 글", "그" 등) 사용을 금지하며, 반드시 구체적인 명칭으로 대체해야 합니다.
    - 질문은 문맥 없이도 이해할 수 있도록 완전하고 독립적이어야 합니다.
    - 질문은 사용자가 실제 상황에서 자연스럽게 물어볼 법한 것이어야 합니다.
    - 질문은 내용의 다양한 측면을 다루며 다양해야 합니다.
    - 각 질문은 간결하고 명확해야 하며, 길이는 30자 이내로 제한합니다.
    - 생성할 질문의 개수는 {{question_count}} 개입니다.

    ## 질문 유형 제안
    - 정의형: ...란 무엇인가? ...은/는 무엇인가?
    - 원인형: 왜 ...인가? ...의 원인은 무엇인가?
    - 방법형: 어떻게 ...하는가? ...하는 방법은?
    - 비교형: ...와 ...의 차이점은 무엇인가?
    - 적용형: ...은 어떤 상황에서 사용할 수 있는가?

    ## 출력 형식
    질문 목록을 바로 출력하세요. 각 줄에 하나의 질문을 작성하고, 번호나 기타 접두사를 붙이지 마세요.

# 지식 베이스 설정
knowledge_base:
  chunk_size: 512
  chunk_overlap: 50
  split_markers: ["\n\n", "\n", ".", "?", "!"] # 한국어 문장 부호 반영
  image_processing:
    enable_multimodal: true

extract:
  extract_graph:
    description: |
      주어진 텍스트를 바탕으로, 다음 단계에 따라 정보 추출 작업을 완료하세요. 논리가 명확하고 정보가 완전하며 정확해야 합니다.

      ## 1. 엔티티 추출 및 속성 보완
      1. **핵심 엔티티 추출**: 텍스트를 통독하고, 논리적 순서(예: 서술 순서, 엔티티 간 관련성)에 따라 작업과 관련된 모든 핵심 엔티티를 추출합니다.
      2. **엔티티 상세 속성 보완**: 추출된 각 엔티티에 대해, 텍스트에 명시된 상세 속성을 빠짐없이 보완하여 핵심 속성이 누락되지 않도록 합니다.

      ## 2. 관계 추출 및 검증
      1. **명확한 관계 유형**: 지정된 관계 목록에서만 유형을 선택합니다. 제한된 관계 유형: %s.
      2. **유효 관계 추출**: 추출된 엔티티 및 속성을 기반으로, 텍스트 내에 실제로 존재하는 관계를 식별합니다. 관계는 텍스트 사실과 부합해야 하며 허위 관계가 없어야 합니다.
      3. **관계 주체 명시**: 추출된 각 관계 그룹에 대해 두 연관 주체를 명확히 표시하여 주체 혼동을 방지합니다.
      4. **연관 속성 보완**: 텍스트 내에 해당 관계와 직접 관련된 보충 정보가 있다면, 이를 관계의 연관 속성으로 추가하여 관계 정보를 더욱 보완합니다.
    tags:
      - "저자"
      - "별명"
    examples:
      - text: |
          《홍루몽》, 또 다른 이름은 《석두기》이며, 청나라 작가 조설근이 창작한 중국 고전 4대 명작 중 하나로, 중국 봉건 사회의 백과사전이라 불린다. 이 책의 전 80회는 조설근이 지었고, 후 40회는 일반적으로 고악이 이어 썼다고 여겨진다.
          소설은 가, 사, 왕, 설 4대 가문의 흥망성쇠를 배경으로 하며, 가보옥, 임대옥, 설보차의 비극적인 사랑을 주선으로 삼아, 가보옥과 금릉십이차를 중심으로 한 정사양부(正邪兩賦), 현우병출(賢愚並出)의 고도로 복잡한 인물 군상을 묘사했다.
          건륭 연간(1743년 전후)에 완성되었으며, 중국 문학사상 현실주의의 절정으로 후세에 깊은 영향을 미쳤다.
        node:
          - name: "홍루몽"
            attributes:
              - "중국 고전 4대 명작 중 하나"
              - "또 다른 이름은 《석두기》"
              - "중국 봉건 사회의 백과사전이라 불림"
          - name: "석두기"
            attributes:
              - "《홍루몽》의 별명"
          - name: "조설근"
            attributes:
              - "청나라 작가"
              - "《홍루몽》 전 80회의 저자"
          - name: "고악"
            attributes:
              - "일반적으로 《홍루몽》 후 40회의 이어 쓴 저자로 여겨짐"
        relation:
          - node1: "홍루몽"
            node2: "조설근"
            type: "저자"
          - node1: "홍루몽"
            node2: "고악"
            type: "저자"
          - node1: "홍루몽"
            node2: "석두기"
            type: "별명"
  extract_entity:
    description: |
      사용자가 제시한 문제를 바탕으로, 다음 단계에 따라 핵심 정보 추출 작업을 수행하세요:
      1. 논리적 연관성 정리: 먼저 텍스트 내용을 전체적으로 분석하여 핵심 논리 관계를 명확히 하고, 해당 핵심 논리 유형을 간략히 표시합니다.
      2. 핵심 엔티티 추출: 정리된 논리 관계를 중심으로 텍스트 내의 핵심 정보를 정밀하게 추출하여 명확한 엔티티로 분류합니다. 핵심 정보 누락이나 불필요한 내용 추가가 없도록 합니다.
      3. 엔티티 우선순위 정렬: 엔티티와 텍스트 핵심 주제 간의 연관성 밀도에 따라 정렬하여, 텍스트 요지 파악에 가장 중요한 엔티티를 우선적으로 제시합니다.
    examples:
      - text: "《홍루몽》, 또 다른 이름은 《석두기》이며, 청나라 작가 조설근이 창작한 중국 고전 4대 명작 중 하나로, 중국 봉건 사회의 백과사전이라 불린다."
        node:
          - name: "홍루몽"
          - name: "조설근"
          - name: "중국 고전 4대 명작"
  fabri_text:
    with_tag: |
      다음 태그(%s) 등과 관련된 텍스트를 무작위로 생성해 주세요. 분량은 [50-200]자 사이로 하고, 태그와 관련된 전문 용어나 전형적인 요소를 최대한 포함하여 텍스트의 전문성과 관련성을 높여 주세요.
    with_no_tag: |
      무작위로 텍스트를 하나 생성해 주세요. 내용은 자유롭게 구성하되, 분량은 [50-200]자 사이로 해주세요.

# 웹 검색(WebSearch) 설정
web_search:
  # 사용 가능한 검색 엔진 목록
  providers:
    - id: "duckduckgo"
      name: "DuckDuckGo"
      free: true
      requires_api_key: false
      description: "DuckDuckGo API"

  # 기본 설정
  default:
    provider: "duckduckgo"
    max_results: 5
    include_date: true
    compression_method: "none"
    blacklist: []

  # 전역 타임아웃 설정
  timeout: 10

# 테넌트(Tenant) 설정
tenant:
  # 테넌트 간 교차 액세스 기능 활성화 여부 (내부망 환경에서 켜기 가능)
  enable_cross_tenant_access: false
